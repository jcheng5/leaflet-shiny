{"version":3,"file":"esri-leaflet-basemaps.js","sources":["../../../src/EsriLeaflet.js","../../../src/Request.js","../../../src/Layers/BasemapLayer.js","../../../src/Controls/Logo.js"],"names":["EsriLeaflet","VERSION","Layers","Services","Controls","Tasks","Util","Support","CORS","window","XMLHttpRequest","pointerEvents","document","documentElement","style","L","esri","serialize","params","data","f","key","hasOwnProperty","value","param","type","Object","prototype","toString","call","length","JSON","stringify","valueOf","encodeURIComponent","createRequest","callback","context","httpRequest","onerror","error","code","message","onreadystatechange","response","readyState","parse","responseText","e","callbacks","_EsriLeafletCallbacks","Request","request","url","paramString","requestLength","open","send","setRequestHeader","get","JSONP","console","warn","post","XMLHTTP","callbackId","script","DomUtil","create","body","src","id","responseType","abort","_callback","tileProtocol","location","protocol","BasemapLayer","TileLayer","extend","statics","TILES","Streets","urlTemplate","attributionUrl","options","hideLogo","logoPosition","minZoom","maxZoom","subdomains","attribution","Topographic","Oceans","OceansLabels","NationalGeographic","DarkGray","DarkGrayLabels","Gray","GrayLabels","Imagery","ImageryLabels","ImageryTransportation","ShadedRelief","ShadedReliefLabels","Terrain","TerrainLabels","initialize","config","Error","tileOptions","this","setOptions","_getAttributionData","onAdd","map","_logo","Logo","position","addTo","on","_updateMapAttribution","onRemove","removeControl","off","getAttribution","attributions","_attributions","c","contributors","contributor","i","coverageAreas","coverageArea","southWest","LatLng","bbox","northEast","push","score","bounds","LatLngBounds","zoomMin","zoomMax","sort","a","b","_map","attributionControl","newAttributions","getBounds","zoom","getZoom","text","match","intersects","substr","attributionElement","_container","querySelector","innerHTML","maxWidth","getSize","x","fire","basemapLayer","Control","marginTop","marginLeft","marginBottom","marginRight","div","logo"],"mappings":"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","sourcesContent":["var EsriLeaflet = { //jshint ignore:line\n  VERSION: '1.0.0-rc.4',\n  Layers: {},\n  Services: {},\n  Controls: {},\n  Tasks: {},\n  Util: {},\n  Support: {\n    CORS: !!(window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest()),\n    pointerEvents: document.documentElement.style.pointerEvents === ''\n  }\n};\n\nif(typeof window !== 'undefined' && window.L){\n  window.L.esri = EsriLeaflet;\n}\n","(function(EsriLeaflet){\n\n  var callbacks = 0;\n\n  window._EsriLeafletCallbacks = {};\n\n  function serialize(params){\n    var data = '';\n\n    params.f = 'json';\n\n    for (var key in params){\n      if(params.hasOwnProperty(key)){\n        var param = params[key];\n        var type = Object.prototype.toString.call(param);\n        var value;\n\n        if(data.length){\n          data += '&';\n        }\n\n        if(type === '[object Array]' || type === '[object Object]'){\n          value = JSON.stringify(param);\n        } else if (type === '[object Date]'){\n          value = param.valueOf();\n        } else {\n          value = param;\n        }\n\n        data += encodeURIComponent(key) + '=' + encodeURIComponent(value);\n      }\n    }\n\n    return data;\n  }\n\n  function createRequest(callback, context){\n    var httpRequest = new XMLHttpRequest();\n\n    httpRequest.onerror = function(e) {\n      callback.call(context, {\n        error: {\n          code: 500,\n          message: 'XMLHttpRequest error'\n        }\n      }, null);\n    };\n\n    httpRequest.onreadystatechange = function(){\n      var response;\n      var error;\n\n      if (httpRequest.readyState === 4) {\n        try {\n          response = JSON.parse(httpRequest.responseText);\n        } catch(e) {\n          response = null;\n          error = {\n            code: 500,\n            message: 'Could not parse response as JSON.'\n          };\n        }\n\n        if (!error && response.error) {\n          error = response.error;\n          response = null;\n        }\n\n        callback.call(context, error, response);\n      }\n    };\n\n    return httpRequest;\n  }\n\n  // AJAX handlers for CORS (modern browsers) or JSONP (older browsers)\n  EsriLeaflet.Request = {\n    request: function(url, params, callback, context){\n      var paramString = serialize(params);\n      var httpRequest = createRequest(callback, context);\n      var requestLength = (url + '?' + paramString).length;\n\n      // request is less then 2000 characters and the browser supports CORS, make GET request with XMLHttpRequest\n      if(requestLength <= 2000 && L.esri.Support.CORS){\n        httpRequest.open('GET', url + '?' + paramString);\n        httpRequest.send(null);\n\n      // request is less more then 2000 characters and the browser supports CORS, make POST request with XMLHttpRequest\n      } else if (requestLength > 2000 && L.esri.Support.CORS){\n        httpRequest.open('POST', url);\n        httpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n        httpRequest.send(paramString);\n\n      // request is less more then 2000 characters and the browser does not support CORS, make a JSONP request\n      } else if(requestLength <= 2000 && !L.esri.Support.CORS){\n        return L.esri.Request.get.JSONP(url, params, callback, context);\n\n      // request is longer then 2000 characters and the browser does not support CORS, log a warning\n      } else {\n        if(console && console.warn){\n          console.warn('a request to ' + url + ' was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy http://esri.github.io/esri-leaflet/api-reference/request.html');\n          return;\n        }\n      }\n\n      return httpRequest;\n    },\n    post: {\n      XMLHTTP: function (url, params, callback, context) {\n        var httpRequest = createRequest(callback, context);\n        httpRequest.open('POST', url);\n        httpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n        httpRequest.send(serialize(params));\n\n        return httpRequest;\n      }\n    },\n\n    get: {\n      CORS: function (url, params, callback, context) {\n        var httpRequest = createRequest(callback, context);\n\n        httpRequest.open('GET', url + '?' + serialize(params), true);\n        httpRequest.send(null);\n\n        return httpRequest;\n      },\n      JSONP: function(url, params, callback, context){\n        var callbackId = 'c' + callbacks;\n\n        params.callback = 'window._EsriLeafletCallbacks.' + callbackId;\n\n        var script = L.DomUtil.create('script', null, document.body);\n        script.type = 'text/javascript';\n        script.src = url + '?' +  serialize(params);\n        script.id = callbackId;\n\n        window._EsriLeafletCallbacks[callbackId] = function(response){\n          if(window._EsriLeafletCallbacks[callbackId] !== true){\n            var error;\n            var responseType = Object.prototype.toString.call(response);\n\n            if(!(responseType === '[object Object]' || responseType === '[object Array]')){\n              error = {\n                error: {\n                  code: 500,\n                  message: 'Expected array or object as JSONP response'\n                }\n              };\n              response = null;\n            }\n\n            if (!error && response.error) {\n              error = response;\n              response = null;\n            }\n\n            callback.call(context, error, response);\n            window._EsriLeafletCallbacks[callbackId] = true;\n          }\n        };\n\n        callbacks++;\n\n        return {\n          id: callbackId,\n          url: script.src,\n          abort: function(){\n            window._EsriLeafletCallbacks._callback[callbackId]({\n              code: 0,\n              message: 'Request aborted.'\n            });\n          }\n        };\n      }\n    }\n  };\n\n  // Choose the correct AJAX handler depending on CORS support\n  EsriLeaflet.get = (EsriLeaflet.Support.CORS) ? EsriLeaflet.Request.get.CORS : EsriLeaflet.Request.get.JSONP;\n\n  // Always use XMLHttpRequest for posts\n  EsriLeaflet.post = EsriLeaflet.Request.post.XMLHTTP;\n\n  // expose a common request method the uses GET\\POST based on request length\n  EsriLeaflet.request = EsriLeaflet.Request.request;\n\n})(EsriLeaflet);","(function(EsriLeaflet){\n\n  var tileProtocol = (window.location.protocol !== 'https:') ? 'http:' : 'https:';\n\n  EsriLeaflet.Layers.BasemapLayer = L.TileLayer.extend({\n    statics: {\n      TILES: {\n        Streets: {\n          urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',\n          attributionUrl: 'https://static.arcgis.com/attribution/World_Street_Map',\n          options: {\n            hideLogo: false,\n            logoPosition: 'bottomright',\n            minZoom: 1,\n            maxZoom: 19,\n            subdomains: ['server', 'services'],\n            attribution: 'Esri'\n          }\n        },\n        Topographic: {\n          urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}',\n          attributionUrl: 'https://static.arcgis.com/attribution/World_Topo_Map',\n          options: {\n            hideLogo: false,\n            logoPosition: 'bottomright',\n            minZoom: 1,\n            maxZoom: 19,\n            subdomains: ['server', 'services'],\n            attribution: 'Esri'\n          }\n        },\n        Oceans: {\n          urlTemplate: tileProtocol + '//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}',\n          attributionUrl: 'https://static.arcgis.com/attribution/Ocean_Basemap',\n          options: {\n            hideLogo: false,\n            logoPosition: 'bottomright',\n            minZoom: 1,\n            maxZoom: 16,\n            subdomains: ['server', 'services'],\n            attribution: 'Esri'\n          }\n        },\n        OceansLabels: {\n          urlTemplate: tileProtocol + '//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}',\n          options: {\n            hideLogo: true,\n            logoPosition: 'bottomright',\n            //pane: 'esri-label',\n            minZoom: 1,\n            maxZoom: 16,\n            subdomains: ['server', 'services']\n          }\n        },\n        NationalGeographic: {\n          urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}',\n          options: {\n            hideLogo: false,\n            logoPosition: 'bottomright',\n            minZoom: 1,\n            maxZoom: 16,\n            subdomains: ['server', 'services'],\n            attribution: 'Esri'\n          }\n        },\n        DarkGray: {\n          urlTemplate: tileProtocol + '//tiles{s}.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/World_Dark_Gray_Base_Beta/MapServer/tile/{z}/{y}/{x}',\n          options: {\n            hideLogo: false,\n            logoPosition: 'bottomright',\n            minZoom: 1,\n            maxZoom: 10,\n            subdomains: ['1', '2'],\n            attribution: 'Esri, DeLorme, HERE'\n          }\n        },\n        DarkGrayLabels: {\n          urlTemplate: tileProtocol + '//tiles{s}.arcgis.com/tiles/P3ePLMYs2RVChkJx/arcgis/rest/services/World_Dark_Gray_Reference_Beta/MapServer/tile/{z}/{y}/{x}',\n          options: {\n            hideLogo: true,\n            logoPosition: 'bottomright',\n            //pane: 'esri-label',\n            minZoom: 1,\n            maxZoom: 10,\n            subdomains: ['1', '2']\n          }\n        },\n        Gray: {\n          urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}',\n          options: {\n            hideLogo: false,\n            logoPosition: 'bottomright',\n            minZoom: 1,\n            maxZoom: 16,\n            subdomains: ['server', 'services'],\n            attribution: 'Esri, NAVTEQ, DeLorme'\n          }\n        },\n        GrayLabels: {\n          urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}',\n          options: {\n            hideLogo: true,\n            logoPosition: 'bottomright',\n            //pane: 'esri-label',\n            minZoom: 1,\n            maxZoom: 16,\n            subdomains: ['server', 'services']\n          }\n        },\n        Imagery: {\n          urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',\n          options: {\n            hideLogo: false,\n            logoPosition: 'bottomright',\n            minZoom: 1,\n            maxZoom: 19,\n            subdomains: ['server', 'services'],\n            attribution: 'Esri, DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community'\n          }\n        },\n        ImageryLabels: {\n          urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}',\n          options: {\n            hideLogo: true,\n            logoPosition: 'bottomright',\n            //pane: 'esri-label',\n            minZoom: 1,\n            maxZoom: 19,\n            subdomains: ['server', 'services']\n          }\n        },\n        ImageryTransportation: {\n          urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}',\n          //pane: 'esri-label',\n          options: {\n            hideLogo: true,\n            logoPosition: 'bottomright',\n            minZoom: 1,\n            maxZoom: 19,\n            subdomains: ['server', 'services']\n          }\n        },\n        ShadedRelief: {\n          urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}',\n          options: {\n            hideLogo: false,\n            logoPosition: 'bottomright',\n            minZoom: 1,\n            maxZoom: 13,\n            subdomains: ['server', 'services'],\n            attribution: 'ESRI, NAVTEQ, DeLorme'\n          }\n        },\n        ShadedReliefLabels: {\n          urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}',\n          options: {\n            hideLogo: true,\n            logoPosition: 'bottomright',\n            //pane: 'esri-label',\n            minZoom: 1,\n            maxZoom: 12,\n            subdomains: ['server', 'services']\n          }\n        },\n        Terrain: {\n          urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}',\n          options: {\n            hideLogo: false,\n            logoPosition: 'bottomright',\n            minZoom: 1,\n            maxZoom: 13,\n            subdomains: ['server', 'services'],\n            attribution: 'Esri, USGS, NOAA'\n          }\n        },\n        TerrainLabels: {\n          urlTemplate: tileProtocol + '//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}',\n          options: {\n            hideLogo: true,\n            logoPosition: 'bottomright',\n            //pane: 'esri-label',\n            minZoom: 1,\n            maxZoom: 13,\n            subdomains: ['server', 'services']\n          }\n        }\n      }\n    },\n    initialize: function(key, options){\n      var config;\n\n      // set the config variable with the appropriate config object\n      if (typeof key === 'object' && key.urlTemplate && key.options){\n        config = key;\n      } else if(typeof key === 'string' && EsriLeaflet.BasemapLayer.TILES[key]){\n        config = EsriLeaflet.BasemapLayer.TILES[key];\n      } else {\n        throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of \"Streets\", \"Topographic\", \"Oceans\", \"OceansLabels\", \"NationalGeographic\", \"Gray\", \"GrayLabels\", \"DarkGray\", \"DarkGrayLabels\", \"Imagery\", \"ImageryLabels\", \"ImageryTransportation\", \"ShadedRelief\", \"ShadedReliefLabels\", \"Terrain\" or \"TerrainLabels\"');\n      }\n\n      // merge passed options into the config options\n      var tileOptions = L.Util.extend(config.options, options);\n\n      // call the initialize method on L.TileLayer to set everything up\n      L.TileLayer.prototype.initialize.call(this, config.urlTemplate, L.Util.setOptions(this, tileOptions));\n\n      // if this basemap requires dynamic attribution set it up\n      if(config.attributionUrl){\n        this._getAttributionData(config.attributionUrl);\n      }\n    },\n    onAdd: function(map){\n      if(!this.options.hideLogo){\n        this._logo = new EsriLeaflet.Controls.Logo({\n          position: this.options.logoPosition\n        }).addTo(map);\n      }\n\n      // if(this.options.pane && EsriLeaflet.Support.pointerEvents){\n      //   this._initPane();\n      // }\n\n      L.TileLayer.prototype.onAdd.call(this, map);\n\n      map.on('moveend', this._updateMapAttribution, this);\n    },\n    onRemove: function(map){\n      if(this._logo){\n        map.removeControl(this._logo);\n      }\n\n      L.TileLayer.prototype.onRemove.call(this, map);\n\n      map.off('moveend', this._updateMapAttribution, this);\n    },\n    getAttribution:function(){\n      var attribution = '<span class=\"esri-attributions\" style=\"line-height:14px; vertical-align: -3px; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; display:inline-block;\">' + this.options.attribution + '</span>'/* + logo*/;\n      return attribution;\n    },\n    // _initPane: function(){\n    //   if(!this._map.getPane(this.options.pane)){\n    //     var pane = this._map.createPane(this.options.pane);\n    //     pane.style.pointerEvents = 'none';\n    //     pane.style.zIndex = 5;\n    //   }\n    // },\n    _getAttributionData: function(url){\n      EsriLeaflet.get(url, {}, function(error, attributions){\n        this._attributions = [];\n        for (var c = 0; c < attributions.contributors.length; c++) {\n          var contributor = attributions.contributors[c];\n          for (var i = 0; i < contributor.coverageAreas.length; i++) {\n            var coverageArea = contributor.coverageAreas[i];\n            var southWest = new L.LatLng(coverageArea.bbox[0], coverageArea.bbox[1]);\n            var northEast = new L.LatLng(coverageArea.bbox[2], coverageArea.bbox[3]);\n            this._attributions.push({\n              attribution: contributor.attribution,\n              score: coverageArea.score,\n              bounds: new L.LatLngBounds(southWest, northEast),\n              minZoom: coverageArea.zoomMin,\n              maxZoom: coverageArea.zoomMax\n            });\n          }\n        }\n\n        this._attributions.sort(function(a, b){\n          return b.score - a.score;\n        });\n\n        this._updateMapAttribution();\n      }, this);\n    },\n    _updateMapAttribution: function(){\n      if(this._map && this._map.attributionControl && this._attributions){\n        var newAttributions = '';\n        var bounds = this._map.getBounds();\n        var zoom = this._map.getZoom();\n\n        for (var i = 0; i < this._attributions.length; i++) {\n          var attribution = this._attributions[i];\n          var text = attribution.attribution;\n          if(!newAttributions.match(text) && bounds.intersects(attribution.bounds) && zoom >= attribution.minZoom && zoom <= attribution.maxZoom) {\n            newAttributions += (', ' + text);\n          }\n        }\n        newAttributions = newAttributions.substr(2);\n        var attributionElement = this._map.attributionControl._container.querySelector('.esri-attributions');\n        attributionElement.innerHTML = newAttributions;\n        attributionElement.style.maxWidth =  (this._map.getSize().x * 0.65) + 'px';\n        this.fire('attributionupdated', {\n          attribution: newAttributions\n        });\n      }\n    }\n  });\n\n  EsriLeaflet.BasemapLayer = EsriLeaflet.Layers.BasemapLayer;\n\n  EsriLeaflet.Layers.basemapLayer = function(key, options){\n    return new EsriLeaflet.Layers.BasemapLayer(key, options);\n  };\n\n  EsriLeaflet.basemapLayer = function(key, options){\n    return new EsriLeaflet.Layers.BasemapLayer(key, options);\n  };\n\n})(EsriLeaflet);","EsriLeaflet.Controls.Logo = L.Control.extend({\n  options: {\n    position: 'bottomright',\n    marginTop: 0,\n    marginLeft: 0,\n    marginBottom: 0,\n    marginRight: 0\n  },\n  onAdd: function () {\n    var div = L.DomUtil.create('div', 'esri-leaflet-logo');\n    div.style.marginTop = this.options.marginTop;\n    div.style.marginLeft = this.options.marginLeft;\n    div.style.marginBottom = this.options.marginBottom;\n    div.style.marginRight = this.options.marginRight;\n    div.innerHTML = '<a href=\"https://developers.arcgis.com\" style=\"border: none;\"><img src=\"https://js.arcgis.com/3.10/js/esri/images/map/logo-med.png\" style=\"border: none;\"></a>';\n    return div;\n  }\n});\n\nEsriLeaflet.Controls.logo = function(options){\n  return new L.esri.Controls.Logo(options);\n};\n"]}